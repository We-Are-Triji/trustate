{
  "$schema": "https://docs.amplify.aws/schema.json",
  "version": 1,
  "applications": [
    {
      "appRoot": ".",
      "frontend": {
        "phases": {
          "preBuild": {
            "commands": [
              "npm ci"
            ]
          },
          "build": {
            "commands": [
              "env | grep -e NEXT_PUBLIC_SUPABASE_URL -e SUPABASE_SERVICE_ROLE_KEY -e NEXT_PUBLIC_COGNITO_ -e APP_AWS_ >> .env.production",
              "npm run build"
            ]
          }
        },
        "artifacts": {
          "baseDirectory": ".next",
          "files": [
            "**/*"
          ]
        },
        "cache": {
          "paths": [
            "node_modules/**/*"
          ]
        }
      }
    }
  ]
}
